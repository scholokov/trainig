<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Calc</title>
    <script src="./js/index.js"></script>
    <link rel="stylesheet" href="./sass/main.scss">
</head>

<body>
    <header id="top" class="header">
        <h1>Cacl</h1>
    </header>
    <form>
        <input type="text" id="firstNumberField" value="" readonly>
        <br>
        <input type="text" id="result" value="" readonly>
        <br>
        <input onclick="funNumber(7)" type="button" id="b7" value="7">
        <input onclick="funNumber(8)" type="button" id="b8" value="8">
        <input onclick="funNumber(9)" type="button" id="b9" value="9">
        <br>
        <input onclick="funNumber(4)" type="button" id="b4" value="4">
        <input onclick="funNumber(5)" type="button" id="b5" value="5">
        <input onclick="funNumber(6)" type="button" id="b6" value="6">
        <br>
        <input onclick="funNumber(1)" type="button" id="b1" value="1">
        <input onclick="funNumber(2)" type="button" id="b2" value="2">
        <input onclick="funNumber(3)" type="button" id="b3" value="3">
        <br>
        <input onclick="funFunction('+')" type="button" id="plus" value="+">
        <input onclick="funNumber(0)" type="button" id="b0" value="0">
        <input onclick="funFunction('-')" type="button" id="minus" value="-">
        <br>
        <input onclick="funFunction('/')" type="button" id="division" value="/">
        <input onclick="funFunction('*')" type="button" id="multiplication" value="*">
        <input onclick="funResult()" type="button" id="equal" value="=">
        <br>
        <input onclick="funClear()" type="button" id="clear" value="C">
    </form>


    <script>
        var
            firstNumber,
            needToEmptyFiledFlag = false,
            FuncType,
            clearAttempFlag = true;
            
        function funNumber(inputNumber) {   
            if (firstNumber !== undefined && needToEmptyFiledFlag === false){  // первый знаменатель уже заполнен. очищаем поле
                result.value = '';
                needToEmptyFiledFlag = true;      
            }
            else if (firstNumber === undefined && clearAttempFlag === false){  // первый знаменатель уже заполнен
                result.value = '';
                clearAttempFlag = true;
            }
                result.value += inputNumber;
        }

        function funFunction(funType) {
            if (firstNumber === undefined){
                firstNumberField.value = parseInt(result.value) + funType;
                firstNumber = parseInt(result.value);
                FuncType = funType;
            }
        }

        function funClear(){
            firstNumber,
            needToEmptyFiledFlag = false,
            FuncType,
            clearAttempFlag = true;
            result.value = '';
            firstNumberField.value = ''; 
        }

        function funResult() {
            console.log("firstNumber: " + firstNumber);
            console.log("FuncType: " + FuncType);
            if (firstNumber !== undefined){
                firstNumberField.value = "";
                if (FuncType === "+" )
                    result.value = firstNumber + parseInt(result.value);
                else if (FuncType === "-" )
                    result.value = firstNumber - parseInt(result.value);
                else if (FuncType === "*" )
                    result.value = firstNumber * parseInt(result.value);
                else if (FuncType === "/" )
                    result.value = firstNumber / parseInt(result.value);
                needToEmptyFiledFlag = false;
                clearAttempFlag = false;
                firstNumber = undefined;
            }
            console.log("needToEmptyFiledFlag: " + needToEmptyFiledFlag);
            console.log("clearAttempFlag: " + clearAttempFlag);
            console.log("firstNumber: " + firstNumber);
        }

        function keyPress(e){
            if (e.keyCode == 48){   //0
                funNumber(0);
            }
            else if (e.keyCode == 49){  //1
                funNumber(1);
            }
            else if (e.keyCode == 50){  //2
                funNumber(2);
            }
            else if (e.keyCode == 51){  //3
                funNumber(3);
            }
            else if (e.keyCode == 52){  //4
                funNumber(4);
            }
            else if (e.keyCode == 53){  //5
                funNumber(5);
            }
            else if (e.keyCode == 54){  //6
                funNumber(6);
            }
            else if (e.keyCode == 55){  //7
                funNumber(7);
            }
            else if (e.keyCode == 56){  //8
                funNumber(8);
            }
            else if (e.keyCode == 57){  //9
                funNumber(9);
            }
        }

        window.addEventListener("keydown", keyPress, false);
    </script>


</body>

</html>